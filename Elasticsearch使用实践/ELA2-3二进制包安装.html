<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="WDTP by UnderwaySoft">
  <meta name="Author" content="songx">
  <meta name="Keywords" content="ELA  安装">
  <meta name="Description" content="生产环境下ELA的安装部署">
  <link rel="stylesheet" type="text/css" href="../add-in/style.css" />
  <script src = "../add-in/hl.js"></script>
  <script>hljs.initHighlightingOnLoad(); </script>
  <title>ELA2.3安装部署</title>
 </head>
 <body>
  <p> 
  <div class="siteLogo"><a href = "../index.html"><img src = "../add-in/logo.png" /></a></div>
  <div class="siteMenu"><ul>
<li><a href="../Elasticsearch使用实践/index.html">Elasticsearch使用实践</a>
<li><a href="../运维杂谈/index.html">运维杂谈</a>
</ul></div>
  <hr>
  <div class="siteNavi"><a href="../index.html">v2black</a>/<a href="index.html">Elasticsearch使用实践</a>/</div>
  <h1 id="ELA 二进制包安装配置">ELA 二进制包安装配置</h1>

1、下载官方ELA2.3、JDK最新版二进制包<br>
2、配置java环境
<pre><code>shell
yum remove java-* -y
tar xvf jdk-8u121-linux-x64.tar.gz
mv jdk1.8.0_121 /opt/
ln -s /opt/jdk-8u121-linux-x64/bin/java /usr/bin/java
</code></pre><p>
3、安装ELA
<pre><code>shell
tar xvf elasticsearch-2.3.3.tar.gz
mv elasticsearch-2.3.3 /opt/elasticsearch
useradd elasticsearch -s /sbin/nologin -M
chown elasticsearch.elasticsearch  -R /opt/elasticsearch
mkdir /data1 /data2 /data3
chown elasticsearch.elasticsearch  -R /data1
chown elasticsearch.elasticsearch  -R /data2
chown elasticsearch.elasticsearch  -R /data3
</code></pre><p>
4、配置<br>
echo "ulimit -l unlimited" >> /etc/profile<p>
vim /etc/security/limits.conf<br>
	<em> soft nofile 655350<br>
	</em> hard nofile 655350<br>
	<em> - nproc  20480<p>
echo "vm.max_map_count = 2621440" >> /etc/sysctl.conf<br>
sysctl -p<br>
​	<br>
vim /opt/elasticsearch/bin/elasticsearch<br>
	ulimit -u 20480<br>
	export ES_JAVA_OPTS="$ES_JAVA_OPTS -Djava.io.tmpdir=/tmp/ela1"<br>
	ES_HEAP_SIZE=31G<br>
	ES_HEAP_NEWSIZE=15G<br>
	ES_DIRECT_SIZE=31G<br>
	MAX_OPEN_FILES=655350<p>
vim /opt/elasticsearch/config/elasticsearch.yml<br>
	cluster.name: Galaxy<br>
	node.name: Node1<br>
	bootstrap.mlockall: true<br>
	discovery.zen.ping.timeout: 60s<br>
	discovery.zen.initial_ping_timeout : 60s<br>
	discovery.zen.fd.ping_interval : 10s<br>
	discovery.zen.fd.ping_retries  : 10<br>
	discovery.zen.ping.unicast.hosts: ["111.56.32.111:9300","111.56.32.112:9300"]<br>
	discovery.zen.ping.multicast.enabled: false<br>
	discovery.zen.minimum_master_nodes: 2<br>
	path:<br>
			data:<br>
					- /data1<br>
					- /data2<br>
					- /data3<br>
	path.logs: /data1/logs/<br>
	network.host: 111.56.32.111<br>
	http.port: 9200<br>
	transport.tcp.port: 9300<br>
	index.number_of_shards: 12<br>
	index.number_of_replicas: 0<br>
	index.cache.field.type: soft<p>
<br>
5、安装插件	
<pre><code>shell
./bin/plugin install mobz/elasticsearch-head 
./bin/plugin install lmenezes/elasticsearch-kopf
</code></pre><p>
6、启动<br>
ulimit -l unlimited<br>
cd /opt/elasticsearch<br>
sudo -u elasticsearch ./bin/elasticsearch -d -p pid<p>
7、关闭<br>
kill -9 <code>cat /opt/elasticsearch/pid</code>
  <hr>
  <div class=timeStr>创建时间: 2017.02.23 15:19<br>最后修改: 2017.02.23 15:39</div>
    <div class=contact align="center"><h4><a href="../guestBook.html">有话要说？请在此留言</a></h4></div>
  <div class=prevAndNext>下一篇: <a href="../运维杂谈/微信朋友圈图片的服务策略.html">微信朋友圈图片的服务策略</a></div>
  <hr>
  <div class=ad>
</div>
  <b>随机推荐:</b>
<div class=randomArticels><ul>
<li><a href="../运维杂谈/微信朋友圈图片的服务策略.html">微信朋友圈图片的服务策略</a></li>
</ul></div>
  <hr>
  <div class=contact>Email: songxiao0722@sina.com, <br>QQ: 511843101</div>
  <p><hr>
<table id="copyright"><tr><td id="copyright">&copy; 2017 songx All Right Reserved</td><td id="copyright" align="right">Powered by <a href="http://underwaySoft.com/works/wdtp/index.html" target="_blank">WDTP</a> </td></tr></table>

  </body>
</html>
